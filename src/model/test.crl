-- TEST TYPE DEFINITION CHECKER

Context model:Test als t:

import model:Perspectives als psp:

Section $rolInContext

--------------------------------------------------------------------------------
-- MissingRolInstance
--------------------------------------------------------------------------------
psp:Rol t:rolZonderMogelijkeBinding
  extern $isFunctioneel = true

--------------------------------------------------------------------------------
-- IncorrectBinding
--------------------------------------------------------------------------------
psp:View t:viewMetVerkeerdeBinding
  $propertyReferentie => psp:Rol
    $volgNummer = 1

--------------------------------------------------------------------------------
-- UndefinedRol
--------------------------------------------------------------------------------
psp:View t:viewMetOngedefineerdeRol
  $propertyReferentie => psp:Property
    $volgNummer = 1
  $ongedefinieerdeRol => psp:Context

--------------------------------------------------------------------------------
-- Rol defined in Aspect
--------------------------------------------------------------------------------
psp:Context t:AspectMetRol
  $rolInContext =>
    psp:Rol $ongedefinieerdeRol
      $mogelijkeBinding => psp:Context

psp:Context t:ViewMetExtraRol
  $aspect => psp:View
  $aspect => t:AspectMetRol

-- No errors for this definition.
t:ViewMetExtraRol t:viewMetGedefinieerdeRol
  psp:View$propertyReferentie => psp:Property
    $volgNummer = 1
  t:AspectMetRol$ongedefinieerdeRol => psp:Context

--------------------------------------------------------------------------------
-- Rol defined in Aspect not available because it is an aspectRol.
--------------------------------------------------------------------------------
psp:Context t:ViewMetAspectRol
  $aspect => psp:View
  $aspect => t:AspectMetRol
  $rolInContext =>
    psp:Rol $ongedefinieerdeRol
      $aspectRol => t:AspectMetRol$ongedefinieerdeRol

-- t:AspectMetRol$ongedefinieerdeRol should be unavailable.
t:ViewMetAspectRol t:viewMetGedefinieerdeRol1
  psp:View$propertyReferentie => psp:Property
    $volgNummer = 1
  t:AspectMetRol$ongedefinieerdeRol => psp:Context

--------------------------------------------------------------------------------
-- MissingPropertyValue
--------------------------------------------------------------------------------
psp:Rol t:rolZonderFunctioneleProperty
  $mogelijkeBinding => psp:Rol

--------------------------------------------------------------------------------
-- TooManyPropertyValues
--------------------------------------------------------------------------------
psp:Rol t:rolMetTeveelPropertyWaarden
  extern $isFunctioneel = true,false
  $mogelijkeBinding => psp:Rol

--------------------------------------------------------------------------------
-- IncorrectPropertyValue
--------------------------------------------------------------------------------
psp:Rol t:rolMetVerkeerdePropertyWaarde
  extern $isFunctioneel = 1
  $mogelijkeBinding => psp:Rol

--------------------------------------------------------------------------------
-- PropertyNotDefined (extern)
--------------------------------------------------------------------------------
psp:Rol t:rolMetNietBestaandeExterneProperty
  extern $isFunctioneel = true
  extern $bestaatNiet = 1
  $mogelijkeBinding => psp:Rol

--------------------------------------------------------------------------------
-- PropertyNotDefined (intern)
--------------------------------------------------------------------------------
psp:Rol t:rolMetNietBestaandeInterneProperty
  extern $isFunctioneel = true
  intern $bestaatNiet = 1
  $mogelijkeBinding => psp:Rol

--------------------------------------------------------------------------------
-- PropertyNotDefined (rol)
--------------------------------------------------------------------------------
psp:Rol t:nietBestaandeRolProperty
  extern $isFunctioneel = true
  $mogelijkeBinding => psp:Rol
    $nietBestaandeProperty = 1

--------------------------------------------------------------------------------
-- AspectRolNotFromAspect
--------------------------------------------------------------------------------
psp:Rol t:ongedefineerdeAspectRol
  extern $isFunctioneel = true
  $mogelijkeBinding => psp:Rol
  $aspectRol => t:nietBestaandeRolProperty

--------------------------------------------------------------------------------
-- cycle in aspect
--------------------------------------------------------------------------------
psp:Context t:Sub
  $aspect => t:Super

psp:Context t:Super
  $aspect => t:Sub
