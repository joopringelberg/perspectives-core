// Generated by purs version 0.11.7
"use strict";
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Monad_Aff = require("../Control.Monad.Aff");
var Control_Monad_Eff_Class = require("../Control.Monad.Eff.Class");
var Control_Monad_Reader_Trans = require("../Control.Monad.Reader.Trans");
var Data_Function = require("../Data.Function");
var Data_Maybe = require("../Data.Maybe");
var Data_Unit = require("../Data.Unit");
var Perspectives_CoreTypes = require("../Perspectives.CoreTypes");
var Perspectives_GlobalUnsafeStrMap = require("../Perspectives.GlobalUnsafeStrMap");
var Prelude = require("../Prelude");
var queryCache = Perspectives_GlobalUnsafeStrMap["new"](Data_Unit.unit);
var queryCacheInsert = function (qname) {
    return function (getter) {
        return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(Perspectives_GlobalUnsafeStrMap.poke(queryCache)(qname)(getter)))(function (v) {
            return Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(getter);
        });
    };
};
var queryCacheLookup = function (qname) {
    return Control_Monad_Eff_Class.liftEff(Control_Monad_Reader_Trans.monadEffReader(Control_Monad_Aff.monadEffAff))(Perspectives_GlobalUnsafeStrMap.peek(queryCache)(qname));
};
module.exports = {
    queryCache: queryCache,
    queryCacheInsert: queryCacheInsert,
    queryCacheLookup: queryCacheLookup
};
