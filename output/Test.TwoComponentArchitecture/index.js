// Generated by purs version 0.11.7
"use strict";
var $foreign = require("./foreign");
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Monad_Aff = require("../Control.Monad.Aff");
var Control_Monad_Aff_AVar = require("../Control.Monad.Aff.AVar");
var Control_Monad_Aff_Compat = require("../Control.Monad.Aff.Compat");
var Control_Monad_Aff_Console = require("../Control.Monad.Aff.Console");
var Control_Monad_Eff = require("../Control.Monad.Eff");
var Control_Monad_Eff_Class = require("../Control.Monad.Eff.Class");
var Control_Promise = require("../Control.Promise");
var Control_Semigroupoid = require("../Control.Semigroupoid");
var Data_Function = require("../Data.Function");
var Data_Semigroup = require("../Data.Semigroup");
var Data_Time_Duration = require("../Data.Time.Duration");
var Data_Unit = require("../Data.Unit");
var Prelude = require("../Prelude");
var perspectives = function ($$var) {
    return Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Monad_Aff_AVar.takeVar($$var))(function (v) {
        return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_Aff.bindAff)(Control_Monad_Aff_Console.log("Got a value: " + v))(function () {
            return Control_Monad_Aff_AVar.putVar("Hello to you")($$var);
        });
    });
};
var gui$prime = function (setter) {
    return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_Aff.bindAff)(Control_Monad_Aff.delay(100.0))(function () {
        return Control_Monad_Eff_Class.liftEff(Control_Monad_Aff.monadEffAff)(setter("hello"));
    });
};
var gui = (function () {
    var setter = function (val) {
        return function ($$var) {
            return Control_Monad_Aff.launchAff_(Control_Monad_Aff_AVar.putVar(val)($$var));
        };
    };
    var getter = function ($6) {
        return Control_Promise.fromAff(Control_Monad_Aff_AVar.takeVar($6));
    };
    return function ($7) {
        return Control_Monad_Aff_Compat.fromEffFnAff($foreign._gui(setter)(getter)($7));
    };
})();
var test = Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Monad_Aff_AVar.makeEmptyVar)(function (v) {
    return Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Monad_Aff.forkAff(perspectives(v)))(function (v1) {
        return Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Monad_Aff.forkAff(gui(v)))(function (v2) {
            return Control_Applicative.pure(Control_Monad_Aff.applicativeAff)(Data_Unit.unit);
        });
    });
});
module.exports = {
    test: test,
    perspectives: perspectives,
    gui: gui,
    "gui'": gui$prime,
    _gui: $foreign._gui
};
