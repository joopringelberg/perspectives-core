// Generated by purs version 0.11.7
"use strict";
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Category = require("../Control.Category");
var Control_Monad_Aff = require("../Control.Monad.Aff");
var Control_Monad_Eff_Class = require("../Control.Monad.Eff.Class");
var Control_Monad_Reader_Trans = require("../Control.Monad.Reader.Trans");
var Control_Monad_State_Trans = require("../Control.Monad.State.Trans");
var Control_Monad_Trans_Class = require("../Control.Monad.Trans.Class");
var Control_Semigroupoid = require("../Control.Semigroupoid");
var Data_Array = require("../Data.Array");
var Data_Eq = require("../Data.Eq");
var Data_Foldable = require("../Data.Foldable");
var Data_Function = require("../Data.Function");
var Data_Functor = require("../Data.Functor");
var Data_HeytingAlgebra = require("../Data.HeytingAlgebra");
var Data_Maybe = require("../Data.Maybe");
var Data_Semigroup = require("../Data.Semigroup");
var Data_Show = require("../Data.Show");
var Data_Traversable = require("../Data.Traversable");
var Partial_Unsafe = require("../Partial.Unsafe");
var Perspectives_CoreTypes = require("../Perspectives.CoreTypes");
var Perspectives_Effects = require("../Perspectives.Effects");
var Perspectives_EntiteitAndRDFAliases = require("../Perspectives.EntiteitAndRDFAliases");
var Perspectives_ObjectGetterConstructors = require("../Perspectives.ObjectGetterConstructors");
var Perspectives_TripleAdministration = require("../Perspectives.TripleAdministration");
var Perspectives_TripleGetterConstructors = require("../Perspectives.TripleGetterConstructors");
var Prelude = require("../Prelude");
var Type_Data_Boolean = require("../Type.Data.Boolean");
var $$var = function (name) {
    return function (v) {
        var go = function (subject) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(subject))(function (v1) {
                return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_CoreTypes.putQueryVariable(name)({
                    subject: subject,
                    predicate: v.value0
                }))(function () {
                    return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1);
                });
            });
        };
        return new Perspectives_CoreTypes.TypedTripleGetter(v.value0, go);
    };
};
var useCache = function (v) {
    var go = function (r) {
        return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_TripleAdministration.memorizeQueryResults)(function (v1) {
            return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_TripleAdministration.setMemorizeQueryResults(true))(function () {
                return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(r))(function (v2) {
                    return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_TripleAdministration.setMemorizeQueryResults(v1))(function () {
                        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v2);
                    });
                });
            });
        });
    };
    return new Perspectives_CoreTypes.TypedTripleGetter(v.value0, go);
};
var toBoolean = function (tg) {
    return Control_Bind.composeKleisli(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Function.flip(Perspectives_CoreTypes.applyTypedTripleGetterToMaybeObject)(tg))(function ($188) {
        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Maybe.maybe(false)(Data_Eq.eq(Data_Eq.eqString)("true"))($188));
    });
};
var saveVar = function (name) {
    return function (v) {
        var go = function (subject) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_CoreTypes.readQueryVariable(name))(function (v1) {
                return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(subject))(function (v2) {
                    return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_CoreTypes.putQueryVariable(name)(v1))(function () {
                        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v2);
                    });
                });
            });
        };
        return new Perspectives_CoreTypes.TypedTripleGetter("saveVar_" + (name + v.value0), go);
    };
};
var rolesOf = function (cid) {
    var f = function (rolName) {
        return Perspectives_ObjectGetterConstructors.getRol(rolName)(cid);
    };
    return Perspectives_TripleGetterConstructors.constructTripleGetterFromObjectsGetter("model:Perspectives$rolesOf" + cid)(f);
};
var ref$prime = function (name) {
    return function (ignore) {
        return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_CoreTypes.readQueryVariable(name))(function (v) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Monad_Trans_Class.lift(Control_Monad_State_Trans.monadTransStateT)(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff))(Control_Monad_Eff_Class.liftEff(Control_Monad_Reader_Trans.monadEffReader(Control_Monad_Aff.monadEffAff))(Perspectives_TripleAdministration.lookupInTripleIndex(v.subject)(v.predicate))))(function (v1) {
                return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Maybe.fromJust()(v1));
            });
        });
    };
};
var ref = function (name) {
    return new Perspectives_CoreTypes.TypedTripleGetter(name, ref$prime(name));
};
var not = function (v) {
    var f = function (id) {
        return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(id))(function (v1) {
            var v2 = Data_Array.head(v1.object);
            if (v2 instanceof Data_Maybe.Just && v2.value0 === "true") {
                return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))([ "false" ]);
            };
            return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))([ "true" ]);
        });
    };
    return Perspectives_TripleGetterConstructors.constructTripleGetterFromEffectExpression("model:Perspectives$not_" + v.value0)(f);
};
var mcons = Data_Maybe.maybe(Control_Category.id(Control_Category.categoryFn))(Data_Array.cons);
var lastElement = function (v) {
    return Perspectives_TripleGetterConstructors.constructTripleGetterFromEffectExpression("(lastElement " + (v.value0 + ")"))(Control_Bind.composeKleisli(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1)(function ($189) {
        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Maybe.maybe([  ])(Data_Array.singleton)(Data_Array.last(Perspectives_CoreTypes.tripleObjects($189))));
    }));
};
var isNothing = function (v) {
    return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))((function () {
        var $93 = {};
        for (var $94 in v) {
            if ({}.hasOwnProperty.call(v, $94)) {
                $93[$94] = v[$94];
            };
        };
        $93.object = [ Data_Show.show(Data_Show.showBoolean)(!Data_Array["null"](v.object)) ];
        return $93;
    })());
};
var notEmpty = function (v) {
    var name = "(notEmpty " + (v.value0 + ")");
    var getter = Control_Bind.composeKleisli(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1)(Control_Bind.composeKleisli(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(isNothing)(function (v1) {
        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))((function () {
            var $99 = {};
            for (var $100 in v1) {
                if ({}.hasOwnProperty.call(v1, $100)) {
                    $99[$100] = v1[$100];
                };
            };
            $99.predicate = name;
            $99.tripleGetter = getter;
            return $99;
        })());
    }));
    return Perspectives_TripleAdministration.memorize(getter)(name);
};
var intersect = function (v) {
    return function (v1) {
        var name = "(intersect " + (v.value0 + (" " + (v1.value0 + ")")));
        var getter = function (id) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(id))(function (v2) {
                return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1.value1(id))(function (v3) {
                    return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))({
                        subject: id,
                        predicate: name,
                        object: Data_Array.intersect(Data_Eq.eqString)(v2.object)(v3.object),
                        dependencies: [  ],
                        supports: Data_Functor.map(Data_Functor.functorArray)(Perspectives_TripleAdministration.getRef)([ v2, v3 ]),
                        tripleGetter: getter
                    });
                });
            });
        };
        return Perspectives_TripleAdministration.memorize(getter)(name);
    };
};
var ignoreCache = function (v) {
    var go = function (r) {
        return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_TripleAdministration.memorizeQueryResults)(function (v1) {
            return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_TripleAdministration.setMemorizeQueryResults(false))(function () {
                return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(r))(function (v2) {
                    return Control_Bind.discard(Control_Bind.discardUnit)(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Perspectives_TripleAdministration.setMemorizeQueryResults(v1))(function () {
                        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v2);
                    });
                });
            });
        });
    };
    return new Perspectives_CoreTypes.TypedTripleGetter(v.value0, go);
};
var filter = function (v) {
    return function (v1) {
        var name = "(filter " + (v.value0 + (" " + (v1.value0 + ")")));
        var addSubjectIfTrue = function (v2) {
            return function (arr) {
                var v3 = Data_Array.elemIndex(Data_Eq.eqString)("true")(v2.object);
                if (v3 instanceof Data_Maybe.Nothing) {
                    return arr;
                };
                return Data_Array.cons(v2.subject)(arr);
            };
        };
        var getter = function (id) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1.value1(id))(function (v2) {
                return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Traversable.traverse(Data_Traversable.traversableArray)(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1)(Data_Array.difference(Data_Eq.eqString)(v2.object)([ id ])))(function (v3) {
                    return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Foldable.foldr(Data_Foldable.foldableArray)(addSubjectIfTrue)([  ])(v3)))(function (v4) {
                        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))({
                            subject: id,
                            predicate: name,
                            object: v4,
                            dependencies: [  ],
                            supports: Data_Functor.map(Data_Functor.functorArray)(Perspectives_TripleAdministration.getRef)(Data_Array.cons(v2)(v3)),
                            tripleGetter: getter
                        });
                    });
                });
            });
        };
        return Perspectives_TripleAdministration.memorize(getter)(name);
    };
};
var containsMatching = function (criterium) {
    return function (criteriumName) {
        return function (v) {
            var f = function (subject) {
                return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(subject))(function (v1) {
                    return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Maybe.maybe([ "true" ])(Data_Function["const"]([ "false" ]))(Data_Array.findIndex(criterium(subject))(v1.object)));
                });
            };
            return Perspectives_TripleGetterConstructors.constructTripleGetterFromEffectExpression("model:Perspectives$contains" + criteriumName)(f);
        };
    };
};
var contains = function (id$prime) {
    return function (v) {
        var f = function (id) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(id))(function (v1) {
                var v2 = Data_Array.elemIndex(Data_Eq.eqString)(id$prime)(v1.object);
                if (v2 instanceof Data_Maybe.Nothing) {
                    return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))([ "false" ]);
                };
                return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))([ "true" ]);
            });
        };
        return Perspectives_TripleGetterConstructors.constructTripleGetterFromEffectExpression("model:Perspectives$contains" + id$prime)(f);
    };
};
var containedIn = function (v) {
    var f = function (id) {
        return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(id))(function (v1) {
            var v2 = Data_Array.elemIndex(Data_Eq.eqString)(id)(v1.object);
            if (v2 instanceof Data_Maybe.Nothing) {
                return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))([ "false" ]);
            };
            return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))([ "true" ]);
        });
    };
    return Perspectives_TripleGetterConstructors.constructTripleGetterFromEffectExpression("model:Perspectives$containedIn_" + v.value0)(f);
};
var constant = function (subject) {
    return Perspectives_TripleGetterConstructors.constructTripleGetterFromObjectsGetter("model:Perspectives$constant$_" + subject)(function (v) {
        return Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))([ subject ]);
    });
};
var concat = function (v) {
    return function (v1) {
        var name = "(concat " + (v.value0 + (" " + (v1.value0 + ")")));
        var getter = function (id) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(id))(function (v2) {
                return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1.value1(id))(function (v3) {
                    return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))({
                        subject: id,
                        predicate: name,
                        object: Data_Array.union(Data_Eq.eqString)(v2.object)(v3.object),
                        dependencies: [  ],
                        supports: Data_Functor.map(Data_Functor.functorArray)(Perspectives_TripleAdministration.getRef)([ v2, v3 ]),
                        tripleGetter: getter
                    });
                });
            });
        };
        return Perspectives_TripleAdministration.memorize(getter)(name);
    };
};
var closure_ = function (p) {
    var getter = function (cumulator) {
        return function (id) {
            return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(p(id))(function (v) {
                var v1 = Data_Array.elemIndex(Data_Eq.eqString)(id)(cumulator);
                if (v1 instanceof Data_Maybe.Nothing) {
                    return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(Data_Traversable.traverse(Data_Traversable.traversableArray)(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(getter(Data_Array.union(Data_Eq.eqString)(cumulator)(v)))(Data_Array.difference(Data_Eq.eqString)(v)(cumulator)))(function (v2) {
                        return Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(Data_Array.nub(Data_Eq.eqString)(Control_Bind.join(Control_Bind.bindArray)(Data_Array.cons(v)(v2))));
                    });
                };
                return Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(v);
            });
        };
    };
    return getter([  ]);
};
var closure$prime = function (v) {
    var name = "(closure' " + (v.value0 + ")");
    var getter = function (cumulator) {
        return function (id) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(id))(function (v1) {
                var v2 = Data_Array.elemIndex(Data_Eq.eqString)(id)(cumulator);
                if (v2 instanceof Data_Maybe.Nothing) {
                    var v3 = Data_Array.head(v1.object);
                    if (v3 instanceof Data_Maybe.Nothing) {
                        return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1);
                    };
                    if (v3 instanceof Data_Maybe.Just) {
                        return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(getter(Data_Array.cons(v3.value0)(cumulator))(v3.value0))(function (v4) {
                            var v5 = Data_Array.head(v4.object);
                            if (v5 instanceof Data_Maybe.Nothing) {
                                return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1);
                            };
                            return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))({
                                subject: id,
                                predicate: name,
                                object: v4.object,
                                dependencies: [  ],
                                supports: [ Perspectives_TripleAdministration.getRef(v4) ],
                                tripleGetter: getter(cumulator)
                            });
                        });
                    };
                    throw new Error("Failed pattern match at Perspectives.QueryCombinators line 60, column 11 - line 72, column 67: " + [ v3.constructor.name ]);
                };
                return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1);
            });
        };
    };
    return Perspectives_TripleAdministration.memorize(getter([  ]))(name);
};
var closure = function (v) {
    var name = "(closure " + (v.value0 + ")");
    var getter = function (cumulator) {
        return function (id) {
            return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v.value1(id))(function (v1) {
                var v2 = Data_Array.elemIndex(Data_Eq.eqString)(id)(cumulator);
                if (v2 instanceof Data_Maybe.Nothing) {
                    return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Data_Traversable.traverse(Data_Traversable.traversableArray)(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(getter(Data_Array.union(Data_Eq.eqString)(cumulator)(v1.object)))(Data_Array.difference(Data_Eq.eqString)(v1.object)(cumulator)))(function (v3) {
                        return Control_Bind.bind(Control_Monad_State_Trans.bindStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Bind.join(Control_Bind.bindArray)(Data_Functor.map(Data_Functor.functorArray)(function (v4) {
                            return v4.object;
                        })(v3))))(function (v4) {
                            return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))({
                                subject: id,
                                predicate: name,
                                object: Data_Array.union(Data_Eq.eqString)(v1.object)(v4),
                                dependencies: [  ],
                                supports: Data_Functor.map(Data_Functor.functorArray)(Perspectives_TripleAdministration.getRef)(Data_Array.cons(v1)(v3)),
                                tripleGetter: getter([  ])
                            });
                        });
                    });
                };
                return Control_Applicative.pure(Control_Monad_State_Trans.applicativeStateT(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(v1);
            });
        };
    };
    return Perspectives_TripleAdministration.memorize(getter([  ]))(name);
};
module.exports = {
    closure: closure,
    "closure'": closure$prime,
    closure_: closure_,
    mcons: mcons,
    filter: filter,
    concat: concat,
    intersect: intersect,
    isNothing: isNothing,
    notEmpty: notEmpty,
    toBoolean: toBoolean,
    rolesOf: rolesOf,
    contains: contains,
    containsMatching: containsMatching,
    containedIn: containedIn,
    not: not,
    lastElement: lastElement,
    ignoreCache: ignoreCache,
    useCache: useCache,
    constant: constant,
    "var": $$var,
    ref: ref,
    "ref'": ref$prime,
    saveVar: saveVar
};
