// Generated by purs version 0.11.7
"use strict";
var $foreign = require("./foreign");
var Control_Aff_Sockets = require("../Control.Aff.Sockets");
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Coroutine = require("../Control.Coroutine");
var Control_Coroutine_Aff = require("../Control.Coroutine.Aff");
var Control_Monad_Aff = require("../Control.Monad.Aff");
var Control_Monad_Aff_AVar = require("../Control.Monad.Aff.AVar");
var Control_Monad_Aff_Class = require("../Control.Monad.Aff.Class");
var Control_Monad_Eff = require("../Control.Monad.Eff");
var Control_Monad_Eff_Class = require("../Control.Monad.Eff.Class");
var Control_Monad_Eff_Exception = require("../Control.Monad.Eff.Exception");
var Control_Monad_Eff_Uncurried = require("../Control.Monad.Eff.Uncurried");
var Control_Monad_Error_Class = require("../Control.Monad.Error.Class");
var Control_Monad_Free_Trans = require("../Control.Monad.Free.Trans");
var Control_Monad_Reader_Trans = require("../Control.Monad.Reader.Trans");
var Control_Monad_Rec_Class = require("../Control.Monad.Rec.Class");
var Control_Monad_Trans_Class = require("../Control.Monad.Trans.Class");
var Control_Parallel_Class = require("../Control.Parallel.Class");
var Control_Semigroupoid = require("../Control.Semigroupoid");
var Data_Either = require("../Data.Either");
var Data_Foreign = require("../Data.Foreign");
var Data_Foreign_Class = require("../Data.Foreign.Class");
var Data_Foreign_Generic = require("../Data.Foreign.Generic");
var Data_Foreign_Generic_Class = require("../Data.Foreign.Generic.Class");
var Data_Foreign_Generic_Types = require("../Data.Foreign.Generic.Types");
var Data_Function = require("../Data.Function");
var Data_Functor = require("../Data.Functor");
var Data_Generic_Rep = require("../Data.Generic.Rep");
var Data_Semigroup = require("../Data.Semigroup");
var Data_Show = require("../Data.Show");
var Data_Symbol = require("../Data.Symbol");
var Data_Unit = require("../Data.Unit");
var Perspectives_CoreTypes = require("../Perspectives.CoreTypes");
var Perspectives_DataTypeTripleGetters = require("../Perspectives.DataTypeTripleGetters");
var Perspectives_Effects = require("../Perspectives.Effects");
var Perspectives_EntiteitAndRDFAliases = require("../Perspectives.EntiteitAndRDFAliases");
var Perspectives_GlobalUnsafeStrMap = require("../Perspectives.GlobalUnsafeStrMap");
var Perspectives_ModelBasedTripleGetters = require("../Perspectives.ModelBasedTripleGetters");
var Perspectives_QueryAST = require("../Perspectives.QueryAST");
var Perspectives_QueryCompiler = require("../Perspectives.QueryCompiler");
var Perspectives_QueryEffect = require("../Perspectives.QueryEffect");
var Perspectives_QueryFunctionDescriptionCompiler = require("../Perspectives.QueryFunctionDescriptionCompiler");
var Perspectives_RunMonadPerspectivesQuery = require("../Perspectives.RunMonadPerspectivesQuery");
var Perspectives_TripleAdministration = require("../Perspectives.TripleAdministration");
var Perspectives_TripleGetterComposition = require("../Perspectives.TripleGetterComposition");
var Prelude = require("../Prelude");
var Request = function (x) {
    return x;
};
var IdentifiableObjects = function (x) {
    return x;
};
var Unsubscriber = (function () {
    function Unsubscriber(value0) {
        this.value0 = value0;
    };
    Unsubscriber.create = function (value0) {
        return new Unsubscriber(value0);
    };
    return Unsubscriber;
})();
var $$Error = (function () {
    function $$Error(value0) {
        this.value0 = value0;
    };
    $$Error.create = function (value0) {
        return new $$Error(value0);
    };
    return $$Error;
})();
var GetRolBinding = (function () {
    function GetRolBinding(value0, value1, value2, value3) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
        this.value3 = value3;
    };
    GetRolBinding.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return function (value3) {
                    return new GetRolBinding(value0, value1, value2, value3);
                };
            };
        };
    };
    return GetRolBinding;
})();
var GetBinding = (function () {
    function GetBinding(value0, value1, value2) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
    };
    GetBinding.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return new GetBinding(value0, value1, value2);
            };
        };
    };
    return GetBinding;
})();
var GetBindingType = (function () {
    function GetBindingType(value0, value1, value2) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
    };
    GetBindingType.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return new GetBindingType(value0, value1, value2);
            };
        };
    };
    return GetBindingType;
})();
var GetRolContext = (function () {
    function GetRolContext(value0, value1, value2) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
    };
    GetRolContext.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return new GetRolContext(value0, value1, value2);
            };
        };
    };
    return GetRolContext;
})();
var GetContextType = (function () {
    function GetContextType(value0, value1, value2) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
    };
    GetContextType.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return new GetContextType(value0, value1, value2);
            };
        };
    };
    return GetContextType;
})();
var GetRol = (function () {
    function GetRol(value0, value1, value2, value3) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
        this.value3 = value3;
    };
    GetRol.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return function (value3) {
                    return new GetRol(value0, value1, value2, value3);
                };
            };
        };
    };
    return GetRol;
})();
var GetProperty = (function () {
    function GetProperty(value0, value1, value2, value3) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
        this.value3 = value3;
    };
    GetProperty.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return function (value3) {
                    return new GetProperty(value0, value1, value2, value3);
                };
            };
        };
    };
    return GetProperty;
})();
var GetViewProperties = (function () {
    function GetViewProperties(value0, value1, value2) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
    };
    GetViewProperties.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return new GetViewProperties(value0, value1, value2);
            };
        };
    };
    return GetViewProperties;
})();
var ShutDown = (function () {
    function ShutDown() {

    };
    ShutDown.value = new ShutDown();
    return ShutDown;
})();
var WrongRequest = (function () {
    function WrongRequest() {

    };
    WrongRequest.value = new WrongRequest();
    return WrongRequest;
})();
var Unsubscribe = (function () {
    function Unsubscribe(value0, value1, value2) {
        this.value0 = value0;
        this.value1 = value1;
        this.value2 = value2;
    };
    Unsubscribe.create = function (value0) {
        return function (value1) {
            return function (value2) {
                return new Unsubscribe(value0, value1, value2);
            };
        };
    };
    return Unsubscribe;
})();
var unsubscribeFromObjects = function (subject) {
    return function (predicate) {
        return function (setterId) {
            var effectPredicate = "(" + (predicate + (" ~> " + (setterId + ")")));
            return Control_Monad_Trans_Class.lift(Control_Monad_Reader_Trans.monadTransReaderT)(Control_Monad_Aff.monadAff)(Control_Monad_Eff_Class.liftEff(Control_Monad_Aff.monadEffAff)(Perspectives_TripleAdministration.unRegisterTriple({
                subject: subject,
                predicate: effectPredicate
            })));
        };
    };
};
var subscribeToObjects = function (subject) {
    return function (v) {
        return function (setter) {
            return function (setterId) {
                return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(new Perspectives_CoreTypes.NamedFunction(setterId, Control_Bind.composeKleisli(Control_Monad_Eff.bindEff)(setter)(function ($108) {
                    return Control_Applicative.pure(Control_Monad_Eff.applicativeEff)(Data_Function["const"](Data_Unit.unit)($108));
                }))))(function (v1) {
                    return Data_Functor["void"](Control_Monad_Reader_Trans.functorReaderT(Control_Monad_Aff.functorAff))(Perspectives_RunMonadPerspectivesQuery.runQuery(subject)(Perspectives_QueryEffect.pushesObjectsTo(v)(v1)));
                });
            };
        };
    };
};
var showRequestRecord = function (v) {
    return "{" + (v.request + (", " + (v.subject + (", " + (v.predicate + "}")))));
};
var requestOptions = (function () {
    var $33 = {};
    for (var $34 in Data_Foreign_Generic.defaultOptions) {
        if ({}.hasOwnProperty.call(Data_Foreign_Generic.defaultOptions, $34)) {
            $33[$34] = Data_Foreign_Generic["defaultOptions"][$34];
        };
    };
    $33.unwrapSingleConstructors = true;
    return $33;
})();
var marshallRequestRecord = function (v) {
    if (v.request === "GetRolBinding") {
        return new GetRolBinding(v.subject, v.predicate, v.reactStateSetter, v.setterId);
    };
    if (v.request === "GetBinding") {
        return new GetBinding(v.subject, v.reactStateSetter, v.setterId);
    };
    if (v.request === "GetBindingType") {
        return new GetBindingType(v.subject, v.reactStateSetter, v.setterId);
    };
    if (v.request === "GetRol") {
        return new GetRol(v.subject, v.predicate, v.reactStateSetter, v.setterId);
    };
    if (v.request === "GetRolContext") {
        return new GetRolContext(v.subject, v.reactStateSetter, v.setterId);
    };
    if (v.request === "GetContextType") {
        return new GetContextType(v.subject, v.reactStateSetter, v.setterId);
    };
    if (v.request === "GetProperty") {
        return new GetProperty(v.subject, v.predicate, v.reactStateSetter, v.setterId);
    };
    if (v.request === "GetViewProperties") {
        return new GetViewProperties(v.subject, v.reactStateSetter, v.setterId);
    };
    if (v.request === "Unsubscribe") {
        return new Unsubscribe(v.subject, v.predicate, v.setterId);
    };
    if (v.request === "ShutDown") {
        return ShutDown.value;
    };
    return WrongRequest.value;
};
var identifiableObjects = function (setterId) {
    return function (objects) {
        return {
            setterId: setterId,
            objects: objects
        };
    };
};
var getRolFunction = function (cid) {
    return function (rn) {
        return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(Perspectives_RunMonadPerspectivesQuery.runTypedTripleGetterToObject(cid)(Perspectives_DataTypeTripleGetters.contextTypeM))(function (v) {
            return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(Perspectives_CoreTypes.runMonadPerspectivesQueryCompiler(v)(Perspectives_QueryFunctionDescriptionCompiler.compileElementaryQueryStep(new Perspectives_QueryAST.QualifiedRol(rn))(rn + "_getter")))(function (v1) {
                if (v1 instanceof Data_Either.Left) {
                    return Control_Monad_Error_Class.throwError(Control_Monad_Reader_Trans.monadThrowReaderT(Control_Monad_Aff.monadThrowAff))(Control_Monad_Eff_Exception.error(Data_Show.show(Perspectives_CoreTypes.showUserMessage)(v1.value0)));
                };
                if (v1 instanceof Data_Either.Right) {
                    return Perspectives_QueryCompiler.constructQueryFunction(v1.value0);
                };
                throw new Error("Failed pattern match at Perspectives.Api line 202, column 3 - line 204, column 44: " + [ v1.constructor.name ]);
            });
        });
    };
};
var getRolBinding = function (cid) {
    return function (rn) {
        return function (setter) {
            return function (setterId) {
                return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(getRolFunction(cid)(rn))(function (v) {
                    return subscribeToObjects(cid)(Perspectives_TripleGetterComposition.composeTripleGetters(v)(Perspectives_DataTypeTripleGetters.bindingM))(setter)(setterId);
                });
            };
        };
    };
};
var getRol = function (cid) {
    return function (rn) {
        return function (setter) {
            return function (setterId) {
                return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(getRolFunction(cid)(rn))(function (v) {
                    return subscribeToObjects(cid)(v)(setter)(setterId);
                });
            };
        };
    };
};
var getPropertyFunction = function (rid) {
    return function (pn) {
        return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(Perspectives_RunMonadPerspectivesQuery.runTypedTripleGetterToObject(rid)(Perspectives_DataTypeTripleGetters.rolTypeM))(function (v) {
            return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(Perspectives_CoreTypes.runMonadPerspectivesQueryCompiler(v)(Perspectives_QueryFunctionDescriptionCompiler.compileElementaryQueryStep(new Perspectives_QueryAST.QualifiedProperty(pn))(pn + "_getter")))(function (v1) {
                if (v1 instanceof Data_Either.Left) {
                    return Control_Monad_Error_Class.throwError(Control_Monad_Reader_Trans.monadThrowReaderT(Control_Monad_Aff.monadThrowAff))(Control_Monad_Eff_Exception.error(Data_Show.show(Perspectives_CoreTypes.showUserMessage)(v1.value0)));
                };
                if (v1 instanceof Data_Either.Right) {
                    return Perspectives_QueryCompiler.constructQueryFunction(v1.value0);
                };
                throw new Error("Failed pattern match at Perspectives.Api line 216, column 3 - line 218, column 42: " + [ v1.constructor.name ]);
            });
        });
    };
};
var getProperty = function (rid) {
    return function (pn) {
        return function (setter) {
            return function (setterId) {
                return Control_Bind.bind(Control_Monad_Reader_Trans.bindReaderT(Control_Monad_Aff.bindAff))(getPropertyFunction(rid)(pn))(function (v) {
                    return subscribeToObjects(rid)(v)(setter)(setterId);
                });
            };
        };
    };
};
var genericRequest = new Data_Generic_Rep.Generic(function (x) {
    return new Data_Generic_Rep.Product(x.predicate, new Data_Generic_Rep.Product(x.request, new Data_Generic_Rep.Product(x.setterId, x.subject)));
}, function (x) {
    return {
        predicate: x.value0,
        request: x.value1.value0,
        setterId: x.value1.value1.value0,
        subject: x.value1.value1.value1
    };
});
var genericIdentifiableObjects = new Data_Generic_Rep.Generic(function (x) {
    return new Data_Generic_Rep.Product(x.objects, x.setterId);
}, function (x) {
    return {
        objects: x.value0,
        setterId: x.value1
    };
});
var encodeIdentifiableObjects = new Data_Foreign_Class.Encode(Data_Foreign_Generic.genericEncode(genericIdentifiableObjects)(Data_Foreign_Generic_Class.genericEncodeConstructor(new Data_Symbol.IsSymbol(function () {
    return "IdentifiableObjects";
}))(Data_Foreign_Generic_Class.genericEncodeArgsRec(Data_Foreign_Generic_Class.genericEncodeFieldsProduct(Data_Foreign_Generic_Class.genericEncodeFieldsField(new Data_Symbol.IsSymbol(function () {
    return "objects";
}))(Data_Foreign_Class.arrayEncode(Data_Foreign_Class.stringEncode)))(Data_Foreign_Generic_Class.genericEncodeFieldsField(new Data_Symbol.IsSymbol(function () {
    return "setterId";
}))(Data_Foreign_Class.stringEncode)))))(requestOptions));
var dispatchOnRequest = function (req) {
    var isShutDown = function (req1) {
        if (req1 instanceof ShutDown) {
            return true;
        };
        return false;
    };
    var $71 = isShutDown(req);
    if ($71) {
        return Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(Data_Unit.unit);
    };
    if (req instanceof GetRolBinding) {
        return getRolBinding(req.value0)(req.value1)(req.value2)(req.value3);
    };
    if (req instanceof GetBinding) {
        return subscribeToObjects(req.value0)(Perspectives_DataTypeTripleGetters.bindingM)(req.value1)(req.value2);
    };
    if (req instanceof GetBindingType) {
        return subscribeToObjects(req.value0)(Perspectives_TripleGetterComposition.composeTripleGetters(Perspectives_DataTypeTripleGetters.bindingM)(Perspectives_DataTypeTripleGetters.rolTypeM))(req.value1)(req.value2);
    };
    if (req instanceof GetRol) {
        return getRol(req.value0)(req.value1)(req.value2)(req.value3);
    };
    if (req instanceof GetRolContext) {
        return subscribeToObjects(req.value0)(Perspectives_DataTypeTripleGetters.contextM)(req.value1)(req.value2);
    };
    if (req instanceof GetContextType) {
        return subscribeToObjects(req.value0)(Perspectives_DataTypeTripleGetters.contextTypeM)(req.value1)(req.value2);
    };
    if (req instanceof GetProperty) {
        return getProperty(req.value0)(req.value1)(req.value2)(req.value3);
    };
    if (req instanceof GetViewProperties) {
        return subscribeToObjects(req.value0)(Perspectives_TripleGetterComposition.composeTripleGetters(Perspectives_TripleGetterComposition.composeTripleGetters(Perspectives_ModelBasedTripleGetters.propertyReferentiesM)(Perspectives_DataTypeTripleGetters.bindingM))(Perspectives_DataTypeTripleGetters.contextM))(req.value1)(req.value2);
    };
    return Control_Applicative.pure(Control_Monad_Reader_Trans.applicativeReaderT(Control_Monad_Aff.applicativeAff))(Data_Unit.unit);
};
var decodeRequest = new Data_Foreign_Class.Decode(Data_Foreign_Generic.genericDecode(genericRequest)(Data_Foreign_Generic_Class.genericDecodeConstructor(new Data_Symbol.IsSymbol(function () {
    return "Request";
}))(Data_Foreign_Generic_Class.genericDecodeArgsRec(Data_Foreign_Generic_Class.genericDecodeFieldsProduct(Data_Foreign_Generic_Class.genericDecodeFieldsField(new Data_Symbol.IsSymbol(function () {
    return "predicate";
}))(Data_Foreign_Class.stringDecode))(Data_Foreign_Generic_Class.genericDecodeFieldsProduct(Data_Foreign_Generic_Class.genericDecodeFieldsField(new Data_Symbol.IsSymbol(function () {
    return "request";
}))(Data_Foreign_Class.stringDecode))(Data_Foreign_Generic_Class.genericDecodeFieldsProduct(Data_Foreign_Generic_Class.genericDecodeFieldsField(new Data_Symbol.IsSymbol(function () {
    return "setterId";
}))(Data_Foreign_Class.stringDecode))(Data_Foreign_Generic_Class.genericDecodeFieldsField(new Data_Symbol.IsSymbol(function () {
    return "subject";
}))(Data_Foreign_Class.stringDecode))))))(Data_Foreign_Generic_Class.genericCountArgsRec))(requestOptions));
var createRequestEmitter = Control_Monad_Eff_Uncurried.runEffFn3($foreign.createRequestEmitterImpl)(Data_Either.Left.create)(Data_Either.Right.create);
var requestProducer = Control_Coroutine_Aff["produce'"](Control_Monad_Aff_Class.monadAffReader(Control_Monad_Aff_Class.monadAffAff))(createRequestEmitter);
var consumeRequest = Control_Monad_Rec_Class.forever(Control_Monad_Free_Trans.monadRecFreeT(Control_Coroutine.functorAwait)(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Bind.bind(Control_Monad_Free_Trans.bindFreeT(Control_Coroutine.functorAwait)(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Coroutine["await"](Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(function (v) {
    return Control_Monad_Trans_Class.lift(Control_Monad_Free_Trans.monadTransFreeT(Control_Coroutine.functorAwait))(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff))(dispatchOnRequest(v));
}));
var setupApi = Control_Coroutine.runProcess(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(Control_Coroutine.connect(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(Control_Parallel_Class.monadParReaderT(Control_Monad_Aff.parallelAff))(Control_Coroutine.transformProducer(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(Control_Parallel_Class.monadParReaderT(Control_Monad_Aff.parallelAff))(requestProducer)(Control_Monad_Rec_Class.forever(Control_Monad_Free_Trans.monadRecFreeT(Control_Coroutine.functorTransform)(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Coroutine.transform(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff))(marshallRequestRecord))))(consumeRequest));
var setupTcpApi = (function () {
    var connectionHandler = function (connection) {
        var marshallRequest = function (v) {
            if (v instanceof Data_Either.Right) {
                return marshallRequestRecord({
                    request: v.value0.request,
                    subject: v.value0.subject,
                    predicate: v.value0.predicate,
                    setterId: v.value0.setterId,
                    reactStateSetter: function ($109) {
                        return Control_Monad_Aff.launchAff_(Control_Aff_Sockets.writeData(encodeIdentifiableObjects)(Control_Monad_Aff_Class.monadAffAff)(connection)(identifiableObjects(v.value0.setterId)($109)));
                    }
                });
            };
            if (v instanceof Data_Either.Left) {
                return WrongRequest.value;
            };
            throw new Error("Failed pattern match at Perspectives.Api line 112, column 9 - line 112, column 100: " + [ v.constructor.name ]);
        };
        return Control_Coroutine.connect(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(Control_Parallel_Class.monadParReaderT(Control_Monad_Aff.parallelAff))(Control_Coroutine.transformProducer(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(Control_Parallel_Class.monadParReaderT(Control_Monad_Aff.parallelAff))(Control_Aff_Sockets.dataProducer(decodeRequest)(Control_Monad_Aff_Class.monadAffReader(Control_Monad_Aff_Class.monadAffAff))(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(Control_Parallel_Class.monadParReaderT(Control_Monad_Aff.parallelAff))(connection))(Control_Monad_Rec_Class.forever(Control_Monad_Free_Trans.monadRecFreeT(Control_Coroutine.functorTransform)(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff)))(Control_Coroutine.transform(Control_Monad_Reader_Trans.monadReaderT(Control_Monad_Aff.monadAff))(marshallRequest))))(consumeRequest);
    };
    var server = Control_Coroutine.connect(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(Control_Parallel_Class.monadParReaderT(Control_Monad_Aff.parallelAff))(Control_Aff_Sockets.connectionProducer(Control_Monad_Aff_Class.monadAffReader(Control_Monad_Aff_Class.monadAffAff))(Control_Aff_Sockets.defaultTCPOptions))(Control_Aff_Sockets.connectionConsumer(Control_Monad_Aff_Class.monadAffReader(Control_Monad_Aff_Class.monadAffAff))(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(connectionHandler));
    return Control_Coroutine.runProcess(Control_Monad_Reader_Trans.monadRecReaderT(Control_Monad_Aff.monadRecAff))(server);
})();
module.exports = {
    GetRolBinding: GetRolBinding,
    GetBinding: GetBinding,
    GetBindingType: GetBindingType,
    GetRolContext: GetRolContext,
    GetContextType: GetContextType,
    GetRol: GetRol,
    GetProperty: GetProperty,
    GetViewProperties: GetViewProperties,
    ShutDown: ShutDown,
    WrongRequest: WrongRequest,
    Unsubscribe: Unsubscribe,
    Unsubscriber: Unsubscriber,
    "Error": $$Error,
    Request: Request,
    requestOptions: requestOptions,
    showRequestRecord: showRequestRecord,
    IdentifiableObjects: IdentifiableObjects,
    identifiableObjects: identifiableObjects,
    createRequestEmitter: createRequestEmitter,
    requestProducer: requestProducer,
    setupApi: setupApi,
    setupTcpApi: setupTcpApi,
    consumeRequest: consumeRequest,
    marshallRequestRecord: marshallRequestRecord,
    dispatchOnRequest: dispatchOnRequest,
    subscribeToObjects: subscribeToObjects,
    unsubscribeFromObjects: unsubscribeFromObjects,
    getRolBinding: getRolBinding,
    getRol: getRol,
    getRolFunction: getRolFunction,
    getProperty: getProperty,
    getPropertyFunction: getPropertyFunction,
    genericRequest: genericRequest,
    decodeRequest: decodeRequest,
    genericIdentifiableObjects: genericIdentifiableObjects,
    encodeIdentifiableObjects: encodeIdentifiableObjects,
    createRequestEmitterImpl: $foreign.createRequestEmitterImpl
};
