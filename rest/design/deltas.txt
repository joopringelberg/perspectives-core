ALGORITMIEK VOOR ROLDELTAS

Als de Rol functioneel is:
Als id, rolName en deltaType overeenkomen, vervang de oude dan door de nieuwe.
Als id en rolName overeenkomen, dan:
  - als de nieuwe DeltaType Remove is,
    - als de oude DeltaType Add is, verwijder de oude.
    - als de oude DeltaType Change is, vervang dan de oude door de nieuwe.
  - als de nieuwe DeltaType Change is,
    - als de oude DeltaType Add is, vervang dan de waarde van de oude door die van de nieuwe.
    - als de oude DeltaType Remove is, hebben we een foutsituatie.
  - als de nieuwe DeltaType Add is
    - als de oude DeltaType Remove is, verwijder dan de oude;
Samengevat, voor functionele rollen:
- Als de nieuwe Delta exact gelijk is aan een oude, negeer dan de nieuwe.
- Als id, rolName en deltaType overeenkomen, vervang de oude dan door de nieuwe.
- Als id en rolName overeenkomen 
  - en het ene DeltaType is Add en het andere Remove, verwijder dan de oude.
  - en het oude DeltaType is Change en het nieuwe Remove, vervang de oude dan door de nieuwe
  - en het oude DeltaType is Add en het nieuwe is Change, vervang dan in de oude de rolID door die van de nieuwe.

Als de Rol niet functioneel is en id en rolName overeenkomen.
Als het nieuwe DeltaType Change is, hebben we een foutsituatie.
- Als het nieuwe DeltaType Add is
  - als het oude DeltaType Remove is
    - als de rolIDs komen overeen: verwijder de oude
    - anders: voeg de nieuwe toe.
  - als het oude DeltaType Add is
    - als de rolIDs overeenkomen: negeer de nieuwe
    - anders: voeg de nieuwe toe.
- Als het nieuwe Deltatype Remove is
  - als het oude DeltaType Remove is
    - als de rolIDs overeenkomen: negeer de nieuwe
    - anders: voeg de nieuwe toe.
  - als het oude DeltaType Add is
    - als de rolIDs overeenkomen: verwijder de oude
    - anders: voeg de nieuwe toe.
Samengevat, voor niet-functionele rollen:
- Als de nieuwe Delta exact gelijk is aan een oude, negeer dan de nieuwe.
- Als de id, rolName en rolID van beide overeenkomen en het ene DeltaType is Add en het andere is Remove, verwijder dan de oude.
- anders: voeg de nieuwe toe.

ALGORITME
1. Bepaal of de delta precies zo voorkomt in de lijst in de transactie. Zo ja, negeer dan de nieuwe delta.
2. Bepaal of de rol functioneel is.
ZO JA:
3. Zoek een delta waarvan de id, rolName en DeltaType gelijk zijn aan die van de nieuwe. 
	Indien gevonden: vervang die door de nieuwe.
	Indien niet gevonden: zoek een delta waarvan id en rolName overeenkomen. 
		Indien gevonden, als geldt:
			het ene DeltaType is Add en het andere Remove, verwijder dan de oude.
			het oude DeltaType is Change en het nieuwe Remove, vervang de oude dan door de nieuwe
			het oude DeltaType is Add en het nieuwe is Change, vervang dan in de oude de rolID door die van de nieuwe.
		Indien niet gevonden: voeg de nieuwe toe.
ZO NEE:
4. zoek een delta waarvan id, rolName en rolID gelijk zijn aan die van de nieuwe en het ene DeltaType Add is en het andere Remove.
	Indien gevonden: verwijder de oude.
	Anders: voeg de nieuwe toe.
