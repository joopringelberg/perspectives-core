CRL TEKST MET USER ENTITEITEN OPSLAAN

Een tekst kan rollen en contexten bevatten uit
	- de enclosing context van de tekst (= de 'eigen namespace')
	- de user namespace
	- allerlei andere namespaces.

VASTSTELLING: we negeren bij het opslaan de contexten en rollen uit andere namespaces.
VASTSTELLING: alle rollen en contexten van de eigen namespace moeten in de DomeinFile terechtkomen.

En nu de rest:
1. Een user: context die op top niveau is gedefineerd, moet worden opgeslagen.
2. een rolbinding expressie die slechts verwijst naar een user: context of rol, leidt niet tot opslaan van die context of rol.
3. Een rolbinding expressie waarbij een user: context inline wordt gedefinieerd, moet wel worden opgeslagen.

Kunnen we dat onderscheid nog maken in domeinFileFromContext?

Nee. Inline is een tekst-eigenschap en geen eigenschap van de rol of context an sich.

We moeten dus als richtlijn aanhouden dat een user: context op topniveau gedefinieerd moet worden omdat hij anders niet wordt opgeslagen.

VASTSTELLING: een rol of context in de usr: namespace wordt niet opgeslagen, TENZIJ het de binding is van een rol waarvan de context de enclosing context is (tenzij hij gebonden is in de enclosing context).

VASTSTELLING: contexten in de usr: namespace die niet op topniveau in een CRL tekst zijn gedeclareerd, worden niet opgeslagen in couchdb.

ALGORITME VOOR HET OPSLAAN VAN EEN CONTEXT
Dit algoritme heeft een boolean parameter "definedAtTopLevel" en een parameter "context". 
1. Als de namespace die van de enclosing context is, sla op in de DomeinFile. Sla alle rollen óók op in de DomeinFile. Sla de buitenrol óók op. Return true.
2. Anders, als "definedAtTopLevel" true is (als de namespace model:User is en de context is gebonden in een rol van de enclosing context), sla op in de entities database. Sla alle rollen óók op in de entities database. Sla de buitenrol óók op. Return true.
3. Anders: sla niet op. Return false.

ALGORITME VOOR HET ANALYSEREN VAN EEN CONTEXT
Dit algoritme heeft een boolean parameter, "definedAtToplevel" en een parameter "context". "enclosingContext" moet zichtbaar zijn.
1. Sla de context al dan niet op door het "Algoritme voor het opslaan van een context" te volgen. Geef de parameter "definedAtTopLevel" mee.
	- niet opgeslagen? Beeindig het algoritme.
	- wel opgeslagen? Ga verder.
2. Voor de binding van elke rol: 
	- als de binding een rol is, stop.
	- anders: volg het "algoritme voor het analyseren van een context". Als de context de enclosing context is, geef dan "true" mee als waarde voor de parameter "definedAtToplevel"
	
Begin het algoritme met de enclosingContext en geef de parameter "definedAtTopLevel" de waarde false.
